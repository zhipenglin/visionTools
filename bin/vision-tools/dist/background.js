!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./background.js")}({"../node_modules/babel-runtime/core-js/object/assign.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"../node_modules/babel-runtime/core-js/object/define-property.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"../node_modules/babel-runtime/helpers/classCallCheck.js":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"../node_modules/babel-runtime/helpers/createClass.js":function(e,t,n){"use strict";t.__esModule=!0;var r=n("../node_modules/babel-runtime/core-js/object/define-property.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},"../node_modules/babel-runtime/helpers/defineProperty.js":function(e,t,n){"use strict";t.__esModule=!0;var r=n("../node_modules/babel-runtime/core-js/object/define-property.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},"../node_modules/core-js/library/fn/object/assign.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.object.assign.js"),e.exports=n("../node_modules/core-js/library/modules/$.core.js").Object.assign},"../node_modules/core-js/library/fn/object/define-property.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/$.js");e.exports=function(e,t,n){return r.setDesc(e,t,n)}},"../node_modules/core-js/library/modules/$.a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"../node_modules/core-js/library/modules/$.cof.js":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"../node_modules/core-js/library/modules/$.core.js":function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},"../node_modules/core-js/library/modules/$.ctx.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/$.a-function.js");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},"../node_modules/core-js/library/modules/$.defined.js":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"../node_modules/core-js/library/modules/$.export.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/$.global.js"),o=n("../node_modules/core-js/library/modules/$.core.js"),u=n("../node_modules/core-js/library/modules/$.ctx.js"),i=function(e,t,n){var a,s,c,l=e&i.F,f=e&i.G,d=e&i.S,p=e&i.P,b=e&i.B,h=e&i.W,y=f?o:o[t]||(o[t]={}),_=f?r:d?r[t]:(r[t]||{}).prototype;f&&(n=t);for(a in n)(s=!l&&_&&a in _)&&a in y||(c=s?_[a]:n[a],y[a]=f&&"function"!=typeof _[a]?n[a]:b&&s?u(c,r):h&&_[a]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?u(Function.call,c):c,p&&((y.prototype||(y.prototype={}))[a]=c))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,e.exports=i},"../node_modules/core-js/library/modules/$.fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"../node_modules/core-js/library/modules/$.global.js":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"../node_modules/core-js/library/modules/$.iobject.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/$.cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"../node_modules/core-js/library/modules/$.js":function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},"../node_modules/core-js/library/modules/$.object-assign.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/$.js"),o=n("../node_modules/core-js/library/modules/$.to-object.js"),u=n("../node_modules/core-js/library/modules/$.iobject.js");e.exports=n("../node_modules/core-js/library/modules/$.fails.js")(function(){var e=Object.assign,t={},n={},r=Symbol(),o="abcdefghijklmnopqrst";return t[r]=7,o.split("").forEach(function(e){n[e]=e}),7!=e({},t)[r]||Object.keys(e({},n)).join("")!=o})?function(e,t){for(var n=o(e),i=arguments,a=i.length,s=1,c=r.getKeys,l=r.getSymbols,f=r.isEnum;a>s;)for(var d,p=u(i[s++]),b=l?c(p).concat(l(p)):c(p),h=b.length,y=0;h>y;)f.call(p,d=b[y++])&&(n[d]=p[d]);return n}:Object.assign},"../node_modules/core-js/library/modules/$.to-object.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/$.defined.js");e.exports=function(e){return Object(r(e))}},"../node_modules/core-js/library/modules/es6.object.assign.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/$.export.js");r(r.S+r.F,"Object",{assign:n("../node_modules/core-js/library/modules/$.object-assign.js")})},"../node_modules/lodash.merge/index.js":function(e,t,n){(function(e,n){function r(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function u(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function s(e,t,n,r){var o=-1,u=e?e.length:0;for(r&&u&&(n=e[++o]);++o<u;)n=t(n,e[o],o,e);return n}function c(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function l(e,t){return null==e?void 0:e[t]}function f(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function d(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function p(e,t){return function(n){return e(t(n))}}function b(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function h(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y(){this.__data__=Zt?Zt(null):{}}function _(e){return this.has(e)&&delete this.__data__[e]}function j(e){var t=this.__data__;if(Zt){var n=t[e];return n===Be?void 0:n}return Nt.call(t,e)?t[e]:void 0}function v(e){var t=this.__data__;return Zt?void 0!==t[e]:Nt.call(t,e)}function g(e,t){return this.__data__[e]=Zt&&void 0===t?Be:t,this}function m(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(){this.__data__=[]}function O(e){var t=this.__data__,n=W(t,e);return!(n<0||(n==t.length-1?t.pop():zt.call(t,n,1),0))}function D(e){var t=this.__data__,n=W(t,e);return n<0?void 0:t[n][1]}function P(e){return W(this.__data__,e)>-1}function x(e,t){var n=this.__data__,r=W(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function k(){this.__data__={hash:new h,map:new(Jt||m),string:new h}}function E(e){return pe(this,e).delete(e)}function T(e){return pe(this,e).get(e)}function M(e){return pe(this,e).has(e)}function $(e,t){return pe(this,e).set(e,t),this}function N(e){this.__data__=new m(e)}function S(){this.__data__=new m}function C(e){return this.__data__.delete(e)}function I(e){return this.__data__.get(e)}function L(e){return this.__data__.has(e)}function R(e,t){var n=this.__data__;if(n instanceof m){var r=n.__data__;if(!Jt||r.length<Fe-1)return r.push([e,t]),this;n=this.__data__=new A(r)}return n.set(e,t),this}function F(e,t){var n=ln(e)||xe(e)?c(e.length,String):[],r=n.length,o=!!r;for(var u in e)!t&&!Nt.call(e,u)||o&&("length"==u||je(u,r))||n.push(u);return n}function B(e,t,n){(void 0===n||Pe(e[t],n))&&("number"!=typeof t||void 0!==n||t in e)||(e[t]=n)}function U(e,t,n){var r=e[t];Nt.call(e,t)&&Pe(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function W(e,t){for(var n=e.length;n--;)if(Pe(e[n][0],t))return n;return-1}function z(e,t){return e&&le(t,Ce(t),e)}function G(e,t,n,r,o,u,a){var s;if(r&&(s=u?r(e,o,u,a):r(e)),void 0!==s)return s;if(!Me(e))return e;var c=ln(e);if(c){if(s=he(e),!t)return ce(e,s)}else{var l=cn(e),d=l==Ke||l==Ve;if(fn(e))return te(e,t);if(l==Je||l==We||d&&!u){if(f(e))return u?e:{};if(s=ye(d?{}:e),!t)return fe(e,z(s,e))}else{if(!_t[l])return u?e:{};s=_e(e,l,G,t)}}a||(a=new N);var p=a.get(e);if(p)return p;if(a.set(e,s),!c)var b=n?de(e):Ce(e);return i(b||e,function(o,u){b&&(u=o,o=e[u]),U(s,u,G(o,t,n,r,u,e,a))}),s}function K(e){return Me(e)?Ut(e):{}}function V(e,t,n){var r=t(e);return ln(e)?r:a(r,n(e))}function q(e){return Ct.call(e)}function H(e){return!(!Me(e)||me(e))&&(Ee(e)||f(e)?It:bt).test(De(e))}function J(e){return $e(e)&&Te(e.length)&&!!yt[Ct.call(e)]}function Q(e){if(!we(e))return Vt(e);var t=[];for(var n in Object(e))Nt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function X(e){if(!Me(e))return Oe(e);var t=we(e),n=[];for(var r in e)("constructor"!=r||!t&&Nt.call(e,r))&&n.push(r);return n}function Y(e,t,n,r,o){if(e!==t){if(!ln(t)&&!dn(t))var u=X(t);i(u||t,function(i,a){if(u&&(a=i,i=t[a]),Me(i))o||(o=new N),Z(e,t,a,n,Y,r,o);else{var s=r?r(e[a],i,a+"",e,t,o):void 0;void 0===s&&(s=i),B(e,a,s)}})}}function Z(e,t,n,r,o,u,i){var a=e[n],s=t[n],c=i.get(s);if(c)return void B(e,n,c);var l=u?u(a,s,n+"",e,t,i):void 0,f=void 0===l;f&&(l=s,ln(s)||dn(s)?ln(a)?l=a:ke(a)?l=ce(a):(f=!1,l=G(s,!0)):Ne(s)||xe(s)?xe(a)?l=Se(a):!Me(a)||r&&Ee(a)?(f=!1,l=G(s,!0)):l=a:f=!1),f&&(i.set(s,l),o(l,s,r,u,i),i.delete(s)),B(e,n,l)}function ee(e,t){return t=qt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,o=qt(n.length-t,0),i=Array(o);++r<o;)i[r]=n[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=i,u(e,this,a)}}function te(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function ne(e){var t=new e.constructor(e.byteLength);return new Ft(t).set(new Ft(e)),t}function re(e,t){var n=t?ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function oe(e,t,n){return s(t?n(d(e),!0):d(e),r,new e.constructor)}function ue(e){var t=new e.constructor(e.source,pt.exec(e));return t.lastIndex=e.lastIndex,t}function ie(e,t,n){return s(t?n(b(e),!0):b(e),o,new e.constructor)}function ae(e){return an?Object(an.call(e)):{}}function se(e,t){var n=t?ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ce(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function le(e,t,n,r){n||(n={});for(var o=-1,u=t.length;++o<u;){var i=t[o],a=r?r(n[i],e[i],i,n,e):void 0;U(n,i,void 0===a?e[i]:a)}return n}function fe(e,t){return le(e,sn(e),t)}function de(e){return V(e,Ce,sn)}function pe(e,t){var n=e.__data__;return ge(t)?n["string"==typeof t?"string":"hash"]:n.map}function be(e,t){var n=l(e,t);return H(n)?n:void 0}function he(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Nt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ye(e){return"function"!=typeof e.constructor||we(e)?{}:K(Bt(e))}function _e(e,t,n,r){var o=e.constructor;switch(t){case tt:return ne(e);case ze:case Ge:return new o(+e);case nt:return re(e,r);case rt:case ot:case ut:case it:case at:case st:case ct:case lt:case ft:return se(e,r);case qe:return oe(e,r,n);case He:case Ye:return new o(e);case Qe:return ue(e);case Xe:return ie(e,r,n);case Ze:return ae(e)}}function je(e,t){return!!(t=null==t?Ue:t)&&("number"==typeof e||ht.test(e))&&e>-1&&e%1==0&&e<t}function ve(e,t,n){if(!Me(n))return!1;var r=typeof t;return!!("number"==r?Ae(n)&&je(t,n.length):"string"==r&&t in n)&&Pe(n[t],e)}function ge(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function me(e){return!!Mt&&Mt in e}function we(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Et)}function Oe(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function De(e){if(null!=e){try{return $t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Pe(e,t){return e===t||e!==e&&t!==t}function xe(e){return ke(e)&&Nt.call(e,"callee")&&(!Wt.call(e,"callee")||Ct.call(e)==We)}function Ae(e){return null!=e&&Te(e.length)&&!Ee(e)}function ke(e){return $e(e)&&Ae(e)}function Ee(e){var t=Me(e)?Ct.call(e):"";return t==Ke||t==Ve}function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ue}function Me(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $e(e){return!!e&&"object"==typeof e}function Ne(e){if(!$e(e)||Ct.call(e)!=Je||f(e))return!1;var t=Bt(e);if(null===t)return!0;var n=Nt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&$t.call(n)==St}function Se(e){return le(e,Ie(e))}function Ce(e){return Ae(e)?F(e):Q(e)}function Ie(e){return Ae(e)?F(e,!0):X(e)}function Le(){return[]}function Re(){return!1}var Fe=200,Be="__lodash_hash_undefined__",Ue=9007199254740991,We="[object Arguments]",ze="[object Boolean]",Ge="[object Date]",Ke="[object Function]",Ve="[object GeneratorFunction]",qe="[object Map]",He="[object Number]",Je="[object Object]",Qe="[object RegExp]",Xe="[object Set]",Ye="[object String]",Ze="[object Symbol]",et="[object WeakMap]",tt="[object ArrayBuffer]",nt="[object DataView]",rt="[object Float32Array]",ot="[object Float64Array]",ut="[object Int8Array]",it="[object Int16Array]",at="[object Int32Array]",st="[object Uint8Array]",ct="[object Uint8ClampedArray]",lt="[object Uint16Array]",ft="[object Uint32Array]",dt=/[\\^$.*+?()[\]{}|]/g,pt=/\w*$/,bt=/^\[object .+?Constructor\]$/,ht=/^(?:0|[1-9]\d*)$/,yt={};yt[rt]=yt[ot]=yt[ut]=yt[it]=yt[at]=yt[st]=yt[ct]=yt[lt]=yt[ft]=!0,yt[We]=yt["[object Array]"]=yt[tt]=yt[ze]=yt[nt]=yt[Ge]=yt["[object Error]"]=yt[Ke]=yt[qe]=yt[He]=yt[Je]=yt[Qe]=yt[Xe]=yt[Ye]=yt[et]=!1;var _t={};_t[We]=_t["[object Array]"]=_t[tt]=_t[nt]=_t[ze]=_t[Ge]=_t[rt]=_t[ot]=_t[ut]=_t[it]=_t[at]=_t[qe]=_t[He]=_t[Je]=_t[Qe]=_t[Xe]=_t[Ye]=_t[Ze]=_t[st]=_t[ct]=_t[lt]=_t[ft]=!0,_t["[object Error]"]=_t[Ke]=_t[et]=!1;var jt="object"==typeof e&&e&&e.Object===Object&&e,vt="object"==typeof self&&self&&self.Object===Object&&self,gt=jt||vt||Function("return this")(),mt="object"==typeof t&&t&&!t.nodeType&&t,wt=mt&&"object"==typeof n&&n&&!n.nodeType&&n,Ot=wt&&wt.exports===mt,Dt=Ot&&jt.process,Pt=function(){try{return Dt&&Dt.binding("util")}catch(e){}}(),xt=Pt&&Pt.isTypedArray,At=Array.prototype,kt=Function.prototype,Et=Object.prototype,Tt=gt["__core-js_shared__"],Mt=function(){var e=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$t=kt.toString,Nt=Et.hasOwnProperty,St=$t.call(Object),Ct=Et.toString,It=RegExp("^"+$t.call(Nt).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=Ot?gt.Buffer:void 0,Rt=gt.Symbol,Ft=gt.Uint8Array,Bt=p(Object.getPrototypeOf,Object),Ut=Object.create,Wt=Et.propertyIsEnumerable,zt=At.splice,Gt=Object.getOwnPropertySymbols,Kt=Lt?Lt.isBuffer:void 0,Vt=p(Object.keys,Object),qt=Math.max,Ht=be(gt,"DataView"),Jt=be(gt,"Map"),Qt=be(gt,"Promise"),Xt=be(gt,"Set"),Yt=be(gt,"WeakMap"),Zt=be(Object,"create"),en=De(Ht),tn=De(Jt),nn=De(Qt),rn=De(Xt),on=De(Yt),un=Rt?Rt.prototype:void 0,an=un?un.valueOf:void 0;h.prototype.clear=y,h.prototype.delete=_,h.prototype.get=j,h.prototype.has=v,h.prototype.set=g,m.prototype.clear=w,m.prototype.delete=O,m.prototype.get=D,m.prototype.has=P,m.prototype.set=x,A.prototype.clear=k,A.prototype.delete=E,A.prototype.get=T,A.prototype.has=M,A.prototype.set=$,N.prototype.clear=S,N.prototype.delete=C,N.prototype.get=I,N.prototype.has=L,N.prototype.set=R;var sn=Gt?p(Gt,Object):Le,cn=q;(Ht&&cn(new Ht(new ArrayBuffer(1)))!=nt||Jt&&cn(new Jt)!=qe||Qt&&"[object Promise]"!=cn(Qt.resolve())||Xt&&cn(new Xt)!=Xe||Yt&&cn(new Yt)!=et)&&(cn=function(e){var t=Ct.call(e),n=t==Je?e.constructor:void 0,r=n?De(n):void 0;if(r)switch(r){case en:return nt;case tn:return qe;case nn:return"[object Promise]";case rn:return Xe;case on:return et}return t});var ln=Array.isArray,fn=Kt||Re,dn=xt?function(e){return function(t){return e(t)}}(xt):J,pn=function(e){return ee(function(t,n){var r=-1,o=n.length,u=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(u=e.length>3&&"function"==typeof u?(o--,u):void 0,i&&ve(n[0],n[1],i)&&(u=o<3?void 0:u,o=1),t=Object(t);++r<o;){var a=n[r];a&&e(t,a,r)}return t})}(function(e,t,n){Y(e,t,n)});n.exports=pn}).call(t,n("../node_modules/webpack/buildin/global.js"),n("../node_modules/webpack/buildin/module.js")(e))},"../node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"../node_modules/webpack/buildin/module.js":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./background.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o,u=n("../node_modules/babel-runtime/core-js/object/assign.js"),i=r(u),a=n("../node_modules/babel-runtime/helpers/classCallCheck.js"),s=r(a),c=n("../node_modules/babel-runtime/helpers/createClass.js"),l=r(c),f=n("../node_modules/babel-runtime/helpers/defineProperty.js"),d=r(f),p=n("../node_modules/lodash.merge/index.js"),b=r(p),h=n("./utils/setBrowserActionIcon.js"),y=r(h),_=n("./utils/CONSTANT.js"),j=(o={imgList:[]},(0,d.default)(o,_.POPUP_PORT_NAME,{}),(0,d.default)(o,_.CONTENT_PORT_NAME,{}),o),v=function(){function e(t,n){(0,s.default)(this,e),this.id=t,this.portName=_.CONTENT_PORT_NAME,this.connect=n,this.eventList={},this.init()}return(0,l.default)(e,null,[{key:"getTab",value:function(e){return j[_.CONTENT_PORT_NAME][e]||{}}},{key:"getConnect",value:function(t){return e.getTab(t).connect}},{key:"getContent",value:function(t){return new e(t,e.getConnect(t))}},{key:"getBrowserActionIconState",value:function(t){var n=new e(t);return n.getImg()||n.getRuleData().show}}]),(0,l.default)(e,[{key:"init",value:function(){var e=this;if(!this.connect)return void console.warn("tab的connect还未建立");this.setConnect(this.connect),this.connect.onMessage.addListener(function(t){e.eventList[t.name]&&e.eventList[t.name].forEach(function(e){e(t.message)})})}},{key:"getData",value:function(){return(0,i.default)({},j[this.portName][this.id])}},{key:"getSendData",value:function(){return{imgData:(0,i.default)({},this.getImgStyleData()),imgSrc:this.getImg(),ruleData:this.getRuleData()}}},{key:"getImgData",value:function(){return(0,i.default)({},this.getData().imgData)}},{key:"getImgStyleData",value:function(){var e=this.getImgData();return delete e.selectIndex,e}},{key:"getRuleData",value:function(){return(0,i.default)({},this.getData().ruleData)}},{key:"getImg",value:function(){var e=this.getImgData();return j.imgList[e.selectIndex]||""}},{key:"setData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j[this.portName][this.id]=(0,b.default)({},this.getData(),e),this}},{key:"setImgData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setData((0,b.default)({},this.getData(),{imgData:e})),this}},{key:"setRuleData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setData((0,b.default)({},this.getData(),{ruleData:e})),this}},{key:"setConnect",value:function(e){return e?(this.setData((0,b.default)({},this.getData(),{connect:e})),this):this}},{key:"send",value:function(e,t){return this.connect&&this.connect.postMessage({name:e,message:t}),this}},{key:"on",value:function(e,t){return this.eventList[e]||(this.eventList[e]=[]),this.eventList[e].push(t),this}}]),e}(),g=function(){function e(t){(0,s.default)(this,e),this.connect=t,this.eventList={},this.init()}return(0,l.default)(e,[{key:"init",value:function(){var e=this;this.connect.onMessage.addListener(function(t){e.eventList[t.name]&&e.eventList[t.name].forEach(function(e){e(t.message)})})}},{key:"send",value:function(e,t){return this.connect&&this.connect.postMessage({name:e,message:t}),this}},{key:"on",value:function(e,t){return this.eventList[e]||(this.eventList[e]=[]),this.eventList[e].push(t),this}}]),e}();chrome.tabs.onSelectionChanged.addListener(function(e){(0,y.default)(v.getBrowserActionIconState(e))}),chrome.extension.onConnect.addListener(function(e){if(e.name==_.CONTENT_PORT_NAME){var t=new v(e.sender.tab.id,e);t.on("initData",function(){t.send("initData",t.getSendData())}).on("dataChange",function(e){var n=e.imgData,r=e.ruleData;t.setData({imgData:n,ruleData:r})})}else if(e.name==_.POPUP_PORT_NAME){var n=new g(e);n.on("initData",function(){chrome.tabs.getSelected(null,function(e){var t=e.id,r=v.getContent(t);n.send("initData",{imgData:(0,i.default)({},r.getImgData(),{list:j.imgList}),ruleData:r.getRuleData()}).on("dataChange",function(e){var t=e.imgData,n=e.ruleData;j.imgList=t.list,delete t.list,r.setData({imgData:t,ruleData:n}),r.send("dataChange",r.getSendData())})})})}})},"./utils/CONSTANT.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POPUP_PORT_NAME="POPUP_PORT_NAME",t.CONTENT_PORT_NAME="CONTENT_PORT_NAME"},"./utils/setBrowserActionIcon.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){chrome.browserAction.setIcon({path:e?{16:"../icons/16.png",48:"../icons/48.png",128:"../icons/128.png"}:{16:"../icons/16-gray.png",48:"../icons/48-gray.png",128:"../icons/128-gray.png"}})}}});
//# sourceMappingURL=background.js.map